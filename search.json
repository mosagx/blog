[{"title":"扒一扒我搭建Hexo的一些坑","url":"/2017/07/26/其它/","content":"## 一. 先从环境搭建说起吧\n搭建模式为Hexo + **GitHub Pages**  \n**这里强调github pages 后面会提到这个坑**  \n本地操作系统是MacOSX的，windows平台类似，换汤不换药\n\n1. 先安装Node.js，便于后面的npm操作，教程网上一大堆，Mac下一行命令搞定，配环境变量也省了  \n`$ brew install node `\n2. 然后安装Hexo，基于Node.js安装  \n`$ npm install -g hexo`\n3. 进入自己的项目文件夹（没有就建一个），这里已blog为例  \n```\n$ cd blog  \n$ hexo init\n$ npm install\n```\n4. 配置github远程仓库  \n  在GitHub上新建project，然后将本地公钥加进去，具体自行Google，这里就不做解释了。  \n**上述操作中，如出现‘xxx command not foubd’类似的提示 注意检查环境变量和语法格式**  \n\n## 二. 连接远程仓库\n1. **publickey permission denied：**  \n   这种问题出现的比较多，情况也比复杂，这里就说说Mac下的吧，我这里是多git账户多情况下出现的这种情况，由于开发需求，有公司的gitlab项目，也有自己私人的github项目，在配置正确的情况下会出现公钥不识别，这就涉及到私钥配对的问题了：\n   - 先说密钥生成。  \n   `$ ssh-keygen -t rsa -b 4096 -C \"user@domain.com\"`  \n   这里的邮箱记得填你GitHub的账户邮箱，避免出现一些未知错误\n   - 查看已添加的私钥列表。      \n   `$ ssh-add -l`\n   - 查看ssh-agent pid    \n   `$ eval \"$(ssh-agent -s)\"`\n   这个主要是看ssh相关的跑起来没\n   - 清空私钥列.   \n   `$ ssh-add -D`\n   - 添加项目对应的私钥.   \n   `$ ssh-add ~/.ssh/github_blog`\n   - 测试连接  \n   `$ ssh -Tv github.me`  \n   这里的github.me是我自己多账户下设置的hostname，关于ssh的config配置文件，如下：\n     \n   ```\n   Host github.me\n\tHostName \tGitHub.com\n\tUser \t\tgit\n\tAddKeysToAgent \tyes\n\tUseKeychain \tyes\n\tIdentityFile \t~/.ssh/github_blog\n   \n   #面配置hexo全局配置文件(项目根目录下的_config.yml)\n  \n   deploy:\n  \ttype: git  #新版本的注意这里是git，不是github  \n  \t#username换成自己的github用户名，后面是项目名.git\n  \trepository: git@username.com:username/blog.git\n  \tbranch: master\n   ```\n3. **配置插件**  \n   ```  \n   $ npm install hexo-generator-feed --save  \n   $ npm install hexo-generator-sitemap --save  \n   $ npm install hexo-generator-baidu-sitemap --save  \n   $ npm install hexo-generator-search --save  \n   ```  \n4. **生成静态页面**  \n   `$ hexo generate`  \n   或者  \n   `$ hexo g`  \n   出错的话，记得后面加'--debug'参数查看详细信息  \n## 三. 提交代码 \n **提交到github服务器**\n   `$ hexo deploy`  \n   或者  \n   `$ hexo d`\n   \n## 四. 配置网页\n  **这里就谈谈前面说到的github pages的坑：**  \n  由于网上的帖子都说配好io直接访问就行了，我试了好久，页面就是出不来，提示找不到服务器，后面翻了翻文档，才看到GitHub Pages这个设置  \n  打开github页面setting->GitHub Pages  \n  选择你的分枝，默认为master主分枝就ok了  \n  访问user.github.io/blog／就能看到你的项目页面了  \n  初次可能会出现样式出不来，头像加载不出等问题，原因是我们的_config.yml设置的root是'/'而项目的/对应你的io，访问／blog的时候样式就会出现路径不对的问题，我直接绑域名就解决了  \n## 五. 绑定域名\n  到这一步就比较简单了，在自己的域名控制台解析一个CNAME到你的io，然后打开github的setting，在GitHub Pages里填入你解析道域名即可，此时，你会看见你的项目里出现一个CNAME文件，将其下载下来，放到你本地的模板目录下的resource下，不然每次deploy都要绑一次。  \n  **-- 先就这些吧**\n   \n  \n\n\n\n","tags":["杂记"],"categories":["其它"]},{"title":"关于生活的一些态度","url":"/2017/07/26/生活/","content":"## 先就这样吧-以后再写\n","tags":["态度"],"categories":["生活"]},{"title":"升级PHP7","url":"/2017/07/26/升级PHP7/","content":"1）更新yum源\n```\nrpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm\n```\n\n2）卸载原有的PHP\n```\nyum remove php* php-common​\n```\n\n3）安装PHP7\n**新版本具体看list里面的**\n```\nyum install php70w​\nyum install php70w-gd php70w-mbstring php70w-mysql\n```\n\n4）查看php信息\n```\nphp -v\nPHP 7.0.10 (cli) (built: Aug 20 2016 08:13:48) ( NTS )\nCopyright (c) 1997-2016 The PHP Group\nZend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies\n```\n","tags":["PHP"],"categories":["编程"]},{"title":"简单的linux防火墙配置","url":"/2017/07/26/linux/","content":"#### 1、查看端口状态\n```\nnetstat -tnl\n```\n#### 2、查看防火墙规则\n```\niptables -L -n\n```\n#### 3、添加端口白名单\n```\n//以80端口为例\niptables -A INPUT -p tcp --dport 80 -j ACCEPT\niptables -A OUTPUT -p tcp --sport 80 -j ACCEPT\n```\n#### 4、禁止除表中白名单以外的一切端口\n```\niptables -p INPUT DROP\niptables -p FORWARD DROP\niptables -p OUTPUT DROP\n```\n#### 5、保存规则并重启iptables\n```\nservice iptables save\nservice iptables restart\n```\n**注：也可以修改iptables规则表文件**\n```\nvi /etc/sysconfig/iptables\n#清除所有规则\niptables -F\niptables -X\n```","tags":["操作系统"],"categories":["操作系统"]},{"title":"Welcome to my site!","url":"/2017/07/24/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","categories":["其它"]}]